# Week-by-week pregnancy knowledge for AI context

PREGNANCY_WEEKS = {
    1: {
        "baby_size": "Poppy seed",
        "baby_development": "Fertilization occurs, cells begin dividing",
        "common_symptoms": ["No noticeable symptoms yet"],
        "normal_experiences": ["Missed period may be first sign"],
        "danger_signs": [],
    },
    2: {
        "baby_size": "Poppy seed",
        "baby_development": "Embryo travels to uterus",
        "common_symptoms": ["Slight fatigue", "Breast tenderness beginning"],
        "normal_experiences": ["Mood changes", "Heightened sense of smell"],
        "danger_signs": [],
    },
    3: {
        "baby_size": "Poppy seed",
        "baby_development": "Implantation begins",
        "common_symptoms": ["Light spotting", "Mild cramping", "Fatigue"],
        "normal_experiences": ["Implantation bleeding (light pink/brown spotting)"],
        "danger_signs": ["Heavy bleeding with clots"],
    },
    4: {
        "baby_size": "Poppy seed",
        "baby_development": "Embryo implants in uterus, placenta forming",
        "common_symptoms": ["Fatigue", "Breast tenderness", "Mild cramping"],
        "normal_experiences": ["Light spotting", "Mood changes", "Missed period"],
        "danger_signs": ["Heavy bleeding", "Severe cramps"],
    },
    5: {
        "baby_size": "Sesame seed",
        "baby_development": "Heart begins to form, neural tube developing",
        "common_symptoms": ["Morning sickness beginning", "Fatigue", "Frequent urination"],
        "normal_experiences": ["Food aversions", "Heightened smell", "Mood swings"],
        "danger_signs": ["Heavy bleeding", "Severe abdominal pain"],
    },
    6: {
        "baby_size": "Lentil",
        "baby_development": "Heart starts beating, facial features forming",
        "common_symptoms": ["Nausea", "Fatigue", "Breast tenderness", "Bloating"],
        "normal_experiences": ["Morning sickness (can be all day)", "Food cravings"],
        "danger_signs": ["Severe vomiting (can't keep fluids down)", "Heavy bleeding"],
    },
    7: {
        "baby_size": "Blueberry",
        "baby_development": "Brain growing rapidly, arms and legs forming",
        "common_symptoms": ["Nausea", "Fatigue", "Frequent urination", "Constipation"],
        "normal_experiences": ["Increased saliva", "Skin changes", "Vivid dreams"],
        "danger_signs": ["Severe dehydration from vomiting", "Bleeding"],
    },
    8: {
        "baby_size": "Raspberry",
        "baby_development": "Arms and legs forming, heart beating strongly",
        "common_symptoms": ["Nausea", "Morning sickness", "Fatigue", "Frequent urination"],
        "normal_experiences": ["Food aversions", "Heightened smell", "Mood swings"],
        "danger_signs": ["Severe vomiting", "Unable to keep fluids down", "Heavy bleeding"],
    },
    9: {
        "baby_size": "Cherry",
        "baby_development": "All essential organs have begun forming",
        "common_symptoms": ["Nausea", "Fatigue", "Mood swings", "Headaches"],
        "normal_experiences": ["Waist thickening", "Breast changes", "Increased hunger"],
        "danger_signs": ["Severe headaches with vision changes", "Heavy bleeding"],
    },
    10: {
        "baby_size": "Kumquat",
        "baby_development": "Bones and cartilage forming, vital organs functioning",
        "common_symptoms": ["Nausea may be decreasing", "Visible veins", "Round ligament pain"],
        "normal_experiences": ["More energy", "Less nausea for some", "Growing belly"],
        "danger_signs": ["Severe abdominal pain", "Heavy bleeding"],
    },
    11: {
        "baby_size": "Fig",
        "baby_development": "Baby can open/close fists, tooth buds forming",
        "common_symptoms": ["Less nausea", "Bloating", "Gas", "Leg cramps"],
        "normal_experiences": ["Skin changes", "Hair changes", "Less frequent urination"],
        "danger_signs": ["Severe pain", "Heavy bleeding", "High fever"],
    },
    12: {
        "baby_size": "Lime",
        "baby_development": "All organs formed, reflexes developing",
        "common_symptoms": ["Nausea decreasing", "More energy", "Slight bump showing"],
        "normal_experiences": ["Skin changes", "Less frequent urination", "Dizziness"],
        "danger_signs": ["Bleeding", "Severe abdominal pain", "Severe headache"],
    },
    13: {
        "baby_size": "Lemon",
        "baby_development": "Fingerprints forming, vocal cords developing",
        "common_symptoms": ["Increased energy", "Reduced nausea", "Round ligament pain"],
        "normal_experiences": ["Second trimester beginning", "Appetite returning"],
        "danger_signs": ["Heavy bleeding", "Severe pain", "Fluid leaking"],
    },
    14: {
        "baby_size": "Peach",
        "baby_development": "Baby can make facial expressions, sucking reflex",
        "common_symptoms": ["More energy", "Increased appetite", "Mild headaches"],
        "normal_experiences": ["Bump more visible", "Less nausea", "Better mood"],
        "danger_signs": ["Severe headaches", "Vision changes", "Heavy bleeding"],
    },
    15: {
        "baby_size": "Apple",
        "baby_development": "Bones hardening, can sense light",
        "common_symptoms": ["Stuffy nose", "Occasional nosebleeds", "Increased appetite"],
        "normal_experiences": ["Baby might be felt moving soon", "Glowing skin"],
        "danger_signs": ["Severe swelling", "Headaches", "Vision changes"],
    },
    16: {
        "baby_size": "Avocado",
        "baby_development": "Can hear sounds, eyes moving",
        "common_symptoms": ["Backaches starting", "Constipation", "Nasal congestion"],
        "normal_experiences": ["May feel first movements (quickening)", "Growing bump"],
        "danger_signs": ["No movement felt by week 20", "Severe pain", "Heavy bleeding"],
    },
    17: {
        "baby_size": "Pear",
        "baby_development": "Fat starting to form, sweat glands developing",
        "common_symptoms": ["Back pain", "Sciatic pain", "Vivid dreams"],
        "normal_experiences": ["Feeling baby move", "Increased appetite", "Weight gain"],
        "danger_signs": ["Severe swelling in face/hands", "Severe headache"],
    },
    18: {
        "baby_size": "Sweet potato",
        "baby_development": "Baby can yawn, hiccup, and suck",
        "common_symptoms": ["Back pain", "Leg cramps", "Dizziness when standing"],
        "normal_experiences": ["Baby kicks more noticeable", "Better sleep for some"],
        "danger_signs": ["Decreased fetal movement", "Severe swelling", "Vision changes"],
    },
    19: {
        "baby_size": "Mango",
        "baby_development": "Vernix coating forming to protect skin",
        "common_symptoms": ["Hip pain", "Round ligament pain", "Heartburn"],
        "normal_experiences": ["Feeling movements daily", "Linea nigra appearing"],
        "danger_signs": ["No fetal movement for 24 hours", "Fluid leaking"],
    },
    20: {
        "baby_size": "Banana",
        "baby_development": "Halfway point! Baby can hear your voice clearly",
        "common_symptoms": ["Shortness of breath", "Heartburn", "Leg cramps"],
        "normal_experiences": ["Anatomy scan time", "Regular movements", "Bigger appetite"],
        "danger_signs": ["Severe headache", "Vision changes", "Decreased movement"],
    },
    21: {
        "baby_size": "Carrot",
        "baby_development": "Baby's movements more coordinated",
        "common_symptoms": ["Varicose veins", "Stretch marks", "Braxton Hicks"],
        "normal_experiences": ["Baby responds to sounds", "Sleep becoming harder"],
        "danger_signs": ["Regular painful contractions", "Bleeding", "Fluid leaking"],
    },
    22: {
        "baby_size": "Papaya",
        "baby_development": "Eyes formed but iris lacks color",
        "common_symptoms": ["Swollen ankles", "Backaches", "Braxton Hicks"],
        "normal_experiences": ["Belly button may pop out", "Vivid dreams"],
        "danger_signs": ["Severe swelling", "Headache that won't go away", "Vision problems"],
    },
    23: {
        "baby_size": "Grapefruit",
        "baby_development": "Sense of movement developed, can feel you walk",
        "common_symptoms": ["Swelling in feet/ankles", "Backache", "Bleeding gums"],
        "normal_experiences": ["Baby has sleep/wake cycles", "Stronger movements"],
        "danger_signs": ["Sudden severe swelling", "Severe headache", "Blurred vision"],
    },
    24: {
        "baby_size": "Corn on the cob",
        "baby_development": "Lungs developing, can hear sounds clearly",
        "common_symptoms": ["Back pain", "Leg cramps", "Swelling in feet/ankles"],
        "normal_experiences": ["Braxton Hicks contractions", "Stretch marks appearing"],
        "danger_signs": ["Sudden swelling in face/hands", "Severe headache", "Vision changes"],
    },
    25: {
        "baby_size": "Cauliflower",
        "baby_development": "Baby gaining weight, skin becoming less transparent",
        "common_symptoms": ["Frequent urination returning", "Hemorrhoids", "Constipation"],
        "normal_experiences": ["Baby responds to your voice", "Hiccups felt"],
        "danger_signs": ["Signs of preterm labor", "Decreased movement", "Fluid leaking"],
    },
    26: {
        "baby_size": "Lettuce head",
        "baby_development": "Eyes can open, lungs producing surfactant",
        "common_symptoms": ["Trouble sleeping", "Braxton Hicks", "Lower back pain"],
        "normal_experiences": ["Baby more active at night", "Stronger kicks"],
        "danger_signs": ["Regular contractions", "Heavy bleeding", "Severe pain"],
    },
    27: {
        "baby_size": "Rutabaga",
        "baby_development": "Brain very active, regular sleep cycles",
        "common_symptoms": ["Shortness of breath", "Leg cramps", "Pelvic pressure"],
        "normal_experiences": ["Third trimester begins", "Baby can open eyes"],
        "danger_signs": ["Decreased movement", "Regular painful contractions", "Bleeding"],
    },
    28: {
        "baby_size": "Eggplant",
        "baby_development": "Eyes can blink, brain growing rapidly",
        "common_symptoms": ["Shortness of breath", "Heartburn", "Trouble sleeping"],
        "normal_experiences": ["Kick counts important now", "Baby dreams"],
        "danger_signs": ["Less than 10 kicks in 2 hours", "Severe swelling", "Headache"],
    },
    29: {
        "baby_size": "Butternut squash",
        "baby_development": "Muscles and lungs maturing",
        "common_symptoms": ["Increased urination", "Hemorrhoids", "Varicose veins"],
        "normal_experiences": ["Baby very active", "Braxton Hicks more common"],
        "danger_signs": ["Decreased movement", "Fluid leaking", "Severe back pain"],
    },
    30: {
        "baby_size": "Cabbage",
        "baby_development": "Brain grows rapidly, can control body temperature",
        "common_symptoms": ["Fatigue returning", "Mood swings", "Heartburn"],
        "normal_experiences": ["Baby may be head down", "Nesting instinct"],
        "danger_signs": ["Signs of preterm labor", "Decreased movement", "High blood pressure"],
    },
    31: {
        "baby_size": "Coconut",
        "baby_development": "All five senses working, brain connections forming",
        "common_symptoms": ["Shortness of breath", "Frequent urination", "Backache"],
        "normal_experiences": ["Less room for baby to move", "Practice contractions"],
        "danger_signs": ["Water breaking", "Regular contractions", "Bleeding"],
    },
    32: {
        "baby_size": "Squash",
        "baby_development": "Toenails and fingernails fully formed",
        "common_symptoms": ["Heartburn", "Shortness of breath", "Leaky breasts"],
        "normal_experiences": ["Baby practicing breathing", "Stronger Braxton Hicks"],
        "danger_signs": ["Decreased movement", "Contractions every 10 min", "Fluid leaking"],
    },
    33: {
        "baby_size": "Pineapple",
        "baby_development": "Bones hardening, brain developing rapidly",
        "common_symptoms": ["Difficulty sleeping", "Overheating", "Swollen feet"],
        "normal_experiences": ["Baby may be engaged in pelvis", "Lightning crotch"],
        "danger_signs": ["Severe swelling", "Headaches", "Vision changes", "Decreased movement"],
    },
    34: {
        "baby_size": "Cantaloupe",
        "baby_development": "Lungs nearly mature, immune system developing",
        "common_symptoms": ["Pelvic pressure", "Fatigue", "Braxton Hicks"],
        "normal_experiences": ["Baby drops lower", "Easier breathing"],
        "danger_signs": ["Regular contractions", "Water breaking", "Heavy bleeding"],
    },
    35: {
        "baby_size": "Honeydew melon",
        "baby_development": "Most organs fully developed, gaining weight",
        "common_symptoms": ["Frequent urination", "Pelvic pain", "Insomnia"],
        "normal_experiences": ["Nesting instinct strong", "Baby very active"],
        "danger_signs": ["Contractions before 37 weeks", "Fluid leaking", "Decreased movement"],
    },
    36: {
        "baby_size": "Romaine lettuce",
        "baby_development": "Fat accumulating, preparing for birth",
        "common_symptoms": ["Pelvic pressure", "Trouble sleeping", "Heartburn"],
        "normal_experiences": ["Baby dropping into pelvis", "Easier to breathe"],
        "danger_signs": ["Water breaking", "Regular contractions", "Heavy bleeding"],
    },
    37: {
        "baby_size": "Swiss chard",
        "baby_development": "Full term! Baby ready for life outside",
        "common_symptoms": ["Mucus plug may release", "Increased discharge", "Nesting"],
        "normal_experiences": ["Baby fully developed", "Could come any day"],
        "danger_signs": ["Heavy bleeding", "Decreased movement", "Severe pain"],
    },
    38: {
        "baby_size": "Leek",
        "baby_development": "Organs fully mature, gaining weight",
        "common_symptoms": ["Braxton Hicks increasing", "Diarrhea", "Nesting"],
        "normal_experiences": ["Bloody show possible", "Baby engaging deeper"],
        "danger_signs": ["Heavy bleeding", "Severe headache", "No movement"],
    },
    39: {
        "baby_size": "Watermelon",
        "baby_development": "Building up fat, brain still developing",
        "common_symptoms": ["Intense pelvic pressure", "Backache", "Loose stools"],
        "normal_experiences": ["Labor could start any time", "Mucus plug releasing"],
        "danger_signs": ["Heavy bleeding", "Severe abdominal pain", "No fetal movement"],
    },
    40: {
        "baby_size": "Pumpkin",
        "baby_development": "Fully developed, ready for birth",
        "common_symptoms": ["Intense pressure", "Contractions may start", "Exhaustion"],
        "normal_experiences": ["Due date! Baby could come now", "Water may break"],
        "danger_signs": ["Heavy bleeding", "Decreased movement", "Signs of infection"],
    },
    41: {
        "baby_size": "Pumpkin",
        "baby_development": "Still growing, monitored closely",
        "common_symptoms": ["Very uncomfortable", "Frequent monitoring needed"],
        "normal_experiences": ["Overdue but still normal", "May need induction discussion"],
        "danger_signs": ["Decreased movement", "Signs of distress", "Water breaking with meconium"],
    },
    42: {
        "baby_size": "Pumpkin",
        "baby_development": "Post-term, close monitoring required",
        "common_symptoms": ["Maximum discomfort", "Ready to deliver"],
        "normal_experiences": ["Induction likely recommended", "Monitoring essential"],
        "danger_signs": ["Any decrease in movement", "Signs of fetal distress"],
    },
}


def get_week_knowledge(week):
    """Get knowledge for specific week, or closest available."""
    if week in PREGNANCY_WEEKS:
        return PREGNANCY_WEEKS[week]

    # Clamp to valid range
    week = max(1, min(42, week))

    # Find closest week
    available = sorted(PREGNANCY_WEEKS.keys())
    closest = min(available, key=lambda x: abs(x - week))
    return PREGNANCY_WEEKS[closest]


def get_trimester(week):
    """Get trimester for a given week."""
    if week <= 13:
        return 1
    elif week <= 27:
        return 2
    return 3


def is_symptom_normal(symptom, week):
    """Check if a symptom is normal for the given week."""
    knowledge = get_week_knowledge(week)
    symptom_lower = symptom.lower()

    # Check in common symptoms
    for s in knowledge['common_symptoms']:
        if symptom_lower in s.lower() or s.lower() in symptom_lower:
            return True

    # Check in normal experiences
    for e in knowledge['normal_experiences']:
        if symptom_lower in e.lower() or e.lower() in symptom_lower:
            return True

    return False


def is_danger_sign(symptom, week):
    """Check if a symptom is a danger sign for the given week."""
    knowledge = get_week_knowledge(week)
    symptom_lower = symptom.lower()

    for d in knowledge['danger_signs']:
        if symptom_lower in d.lower() or d.lower() in symptom_lower:
            return True

    return False
